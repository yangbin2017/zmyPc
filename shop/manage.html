<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>测试</title>
    <meta name="description" content="overview &amp; stats"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <!-- basic styles -->

    <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../assets/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="../assets/css/jquery-ui-1.10.3.full.min.css"/>
    <link rel="stylesheet" href="../assets/css/datepicker.css"/>
    <link rel="stylesheet" href="../assets/css/ui.jqgrid.css"/>
    <!--<link rel="stylesheet" href="../css/jqGrid.css">-->

    <!--[if IE 7]>
    <link rel="stylesheet" href="../assets/css/font-awesome-ie7.min.css"/>
    <![endif]-->
    <link rel="stylesheet" href="../css/zmht2.css">
    <link href="../css/plugins/sweetalert/sweetalert.css" rel="stylesheet">
    <!-- page specific plugin styles -->

    <!-- fonts -->

    <link rel="stylesheet" href="../assets/css/ace-fonts.css"/>

    <!-- ace styles -->

    <link rel="stylesheet" href="../assets/css/ace.min.css"/>
    <link rel="stylesheet" href="../assets/css/ace-rtl.min.css"/>
    <link rel="stylesheet" href="../assets/css/ace-skins.min.css"/>
    <link href="../css/plugins/sweetalert/sweetalert.css" rel="stylesheet">
    <!--<link rel="stylesheet" href="../css/common.css">-->
    <link rel="stylesheet" href="../css/main.css">
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="../assets/css/ace-ie.min.css"/>
    <![endif]-->

    <!-- inline styles related to this page -->

    <!-- ace settings handler -->

    <script src="../assets/js/ace-extra.min.js"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

    <!--[if lt IE 9]>
    <script src="../assets/js/html5shiv.js"></script>
    <script src="../assets/js/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
        window.jQuery || document.write("<script src='../assets/js/jquery-2.0.3.min.js'>" + "<" + "/script>");
    </script>
    <style>
        .tabs-container{
            margin: 0 ;
            padding:20px;
        }
        #tab-1 {
            background-color: #f6f6f6;
            padding: 15px;
        }
        .ui-jqgrid tr.jqgrow td{
            overflow: inherit;
            white-space: normal;
        }
    </style>
</head>

<body>


<div class="main-container" id="main-container">
    <!-- <script type="text/javascript">
        try{ace.settings.check('main-container' , 'fixed')}catch(e){}
    </script> -->

    <div class="main-container-inner">

        <div class="main-content-right">
            <div class="body-content body-content-bg" style="overflow-y: scroll">

                <div class="inner-scollcontent" >
                    <div class="ibox" style="margin-bottom: 0" id="modify-shop">
                        <div class="tabs-container">
                            <!--功能条-->
                            <div class=" clearfix page-search-area">
                                <form id="search-form" action="">
                                    <!-- 输入框-->
                                    <div class="boxpart">
                                        <div class="t">商品名/条码：</div>
                                        <div class="inpt">
                                            <input type="text" class="pintxt" name="keyword">
                                        </div>
                                        <div class="boxbtn">
                                            <button type="submit" class="btn btn-primary" id="cheshixiaoguoid1">查询</button>
                                        </div>
                                    </div>
                                    <!-- 下拉框-->
                                    <div class="boxpart" style="padding-right: 15px">
                                        <div class="t">分类筛选：</div>
                                        <div class="inpt ">
                                            <div class="select-box " >
                                                <div class="bill-input ">
                                                    <input type="text" value="全部">
                                                    <i class="icon-sort-down"></i>
                                                </div>
                                                <div class="select-down goods_type_id" style="display: none;">
                                                    <div class="select-list">全部</div>
                                                    <div class="select-list">休闲食品</div>
                                                    <div class="select-list">饮料</div>
                                                    <div class="select-list">烟酒</div>
                                                    <div class="select-list">熟食速食</div>
                                                    <div class="select-list">生活日用</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="inpt ">
                                            <div class="select-box " >
                                                <div class="bill-input ">
                                                    <input type="text" value="全部">
                                                    <i class="icon-sort-down"></i>
                                                </div>
                                                <div class="select-down goods_son_id" style="display: none;">
                                                    <div class="select-list">全部</div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="boxpart" style="padding-right: 15px">
                                        <div class="t">类型：</div>
                                        <div class="inpt ">
                                            <div class="select-box " >
                                                <div class="bill-input ">
                                                    <input type="text" value="全部">
                                                    <i class="icon-sort-down"></i>
                                                </div>
                                                <div class="select-down " style="display: none;">
                                                    <div class="select-list">全部</div>
                                                    <div class="select-list">普通</div>
                                                    <div class="select-list">组合</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="boxpart" style="padding-right: 15px">
                                        <div class="t">促销活动：</div>
                                        <div class="inpt ">
                                            <div class="select-box " >
                                                <div class="bill-input ">
                                                    <input type="text" value="全部">
                                                    <i class="icon-sort-down"></i>
                                                </div>
                                                <div class="select-down " style="display: none;">
                                                    <div class="select-list">全部</div>
                                                    <div class="select-list">特价</div>
                                                    <div class="select-list">优惠</div>
                                                    <div class="select-list">无</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="boxpart">
                                        <a class="reset" href="javascript:;">清空筛选条件</a>
                                    </div>
                                </form>

                            </div>
                            <!--功能条-->
                            <div class=" clearfix page-title-area">
                                <div class="boxpart page-title">
                                    <span class="txt1">商品列表</span>
                                    <span class="txt2 all-goods-num">共<span class="text-info">5</span>个商品，</span>
                                    <span class="txt2">总进价：<span class="text-danger">￥297.00</span>,</span>
                                    <span class="txt2">总计价值：<span class="text-danger">￥485.00</span></span>
                                </div>
                                <div class="pull-right">
                                    <div style="display: none;" class="tanchukuan1 import-div" id="import-goods-form">
                                        <!--带标题内容区-->
                                        <div class="zmwrap">
                                            <div class="zmwrap-t">
                                                <div class="pull-left">批量导入</div>
                                                <div class="pull-right">
                                                    <button class="btn btn-link guanbituanchuk" style="color: #FF6E6E;"><i
                                                            class="icon-remove font-size-20"></i></button>
                                                </div>
                                            </div>
                                            <div class="zmwrap-c">
                                                <!--功能条-->
                                                <div class="zmbox clearfix margin-left-right-0">
                                                    <!-- 输入框-->
                                                    <div class="boxpart">
                                                        <div class="boxbtn">
                                                            1.还没创建过导入数据文件，
                                                            <a class="btn btn-primary" href="https://b.izhangmai.com/shop_goods.xls">下载模版</a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--功能条-->
                                                <div class="zmbox clearfix margin-left-right-0">
                                                    <!-- 输入框-->
                                                    <div class="boxpart">
                                                        <div class="boxbtn">
                                                            2.已创建好导入数据文件，直接导入；
                                                        </div>
                                                    </div>
                                                </div>
                                                <hr class="zmhr zmhrmargin0">

                                                <!--功能条-->
                                                <div class="zmbox clearfix  margin-left-right-0" id="import-goods-cate">
                                                    <!-- 下拉框-->
                                                    <div class="boxpart padding-0">
                                                        <div class="t">选择分类：</div>
                                                        <div class="inpt ">
                                                            <div class="select-box " >
                                                                <div class="bill-input ">
                                                                    <input type="text" value="全部">
                                                                    <i class="icon-sort-down"></i>
                                                                </div>
                                                                <div class="select-down goods_type_id" style="display: none;">
                                                                    <div class="select-list">全部</div>
                                                                    <div class="select-list">休闲食品</div>
                                                                    <div class="select-list">饮料</div>
                                                                    <div class="select-list">烟酒</div>
                                                                    <div class="select-list">熟食速食</div>
                                                                    <div class="select-list">生活日用</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="inpt ">
                                                            <div class="select-box " >
                                                                <div class="bill-input ">
                                                                    <input type="text" value="全部">
                                                                    <i class="icon-sort-down"></i>
                                                                </div>
                                                                <div class="select-down goods_son_id" style="display: none;">
                                                                    <div class="select-list">全部</div>

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!--功能条-->
                                                <div class="zmbox clearfix margin-left-right-0">
                                                    <!-- 下拉框-->
                                                    <div class="boxpart padding-0">
                                                        <div class="inpt">
                                                            <div class="input-append">
                                                                <input style="width: 198px; height: 32px;" id="photoCover"
                                                                       class="pintxt" type="text" readonly="readonly" value="请选择导入的文件">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="boxpart margin-left-10- padding-0">
                                                        <div class="boxbtn relativeps">
                                                            <div style="width: 278px ; height: 32px ;font-size: 100px; z-index: 3 ;left: -193px; position: absolute; overflow: hidden;">
                                                                <input type="file" name="lefile" id="lefile"
                                                                       style="-ms-transform: scaleX(200); transform: scaleX(200); height: 32px; position: absolute; filter:alpha(opacity=0); opacity: 0; top: 0px; right:106889px; z-index: 4; background: #ccc;">
                                                            </div>
                                                            <button class="btn btn-link">选择文件</button>
                                                        </div>
                                                    </div>
                                                    <!-- 输入框-->
                                                    <div class="boxpart padding-0">
                                                        <div class="boxbtn">
                                                            <button class="btn btn-primary" id="upload-shop_goods_excel">上传</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <p class="text-danger">*导入文件为.xls的excel文件，大小不超过2M；每次导入的商品数量不得超过8000条。</p>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="btn btn-primary btn-iframe" data-url="https://b.izhangmai.com/goods/toexcel?rand=1"
                                            data-form="#search-form">导出
                                    </button>
                                    <i class="jiange"></i>
                                    <button class="btn btn-primary" id="daoruexcel">导入</button>
                                    <i class="jiange"></i>
                                    <button class="btn btn-success btn-edit border-none open-modals" data-open="addShop" data-head="添加商品"
                                          type="button">新增商品
                                    </button>
                                    <i class="jiange"></i>

                                    <button class="btn btn-primary btn-copy" data-url="https://b.izhangmai.com/goods/copy_shop_list"
                                            type="button">复制到其他店铺
                                    </button>
                                    <i class="jiange"></i>
                                    <div id="fat-menu" class="dropdown " style="display: inline-block">
                                        <a id="drop3" class="dropdown-toggle btn btn-primary" aria-expanded="false" aria-haspopup="true"
                                           role="button" data-toggle="dropdown" href="javascript:;">
                                            批量操作
                                            <span class="caret"></span>
                                        </a>
                                        <ul class="dropdown-menu" aria-labelledby="drop3" style="min-width: 110px ; left: -20px">
                                            <li>
                                                <a href="javascript:;" onclick="setType()" class="btn-score">设置分类</a>
                                            </li>
                                            <li class="batch-score">
                                                <a href="javascript:;" onclick="setIntegral()" class="btn-score">设置积分</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="margin-t10">
                                <table id="shopmanage-table"></table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div><!-- /.main-content -->
    </div><!-- /.main-container-inner -->
</div><!-- /.main-container -->
<!--权限设置-->
<div class="modals authoritySetting" >
    <div class="modals-dilog w-1040">
        <div class="modals-content">
            <div class="modals-head">
                <span>添加商品</span>
                <div class="close-m closeModals">&times;</div>
            </div>
            <div class="modals-body maxheight">
                <div class="modals-body-content">
                    <div class="madals-container active">
                        <!-- Tab panes -->
                        <div class="tab-content " style="border-bottom: none">

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--添加商品-->
<div class="modals addShop">
    <div class="modals-dilog w-600" style="top: 20px;">
        <div class="modals-content">
            <div class="modals-head">
                <span>添加商品</span>
                <div class="close-m closeModals">&times;</div>
            </div>
            <div class="modals-body maxheight">
                <div class="modals-body-content">
                    <div class="madals-container active">
                        <!-- Tab panes -->
                        <div class="tab-content " style="border-bottom: none">
                            <form id="goods-modify-form" method="post" class="form-horizontal"
                                  action="">
                                <input type="hidden" name="sort_num" value="">
                                <div class="modal-body" style="max-height: 500px;overflow-y: scroll;overflow-x: hidden">
                                    <h4 class="zm-h3">基本信息</h4>
                                    <input type="hidden" name="goods_id" value="">
                                    <div class="form-group positionrele" style="margin-bottom: 0">
                                        <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0"><span
                                                class="required">*</span>条码：</label>
                                        <div class="col-sm-6">
                                            <input type="text" style="width:165px;" class="form-control pull-left" id="bar_code"
                                                   name="bar_code" value="" data-old="" datatype="bar_code" maxlength="32"
                                                   nullmsg="请输入条码" errormsg="条码格式错误">
                                            <button class="btn btn-link pull-right" type="button"
                                                    onclick="$('.relategoods-form-new').show();return false;"><i
                                                    class="icon-sitemap"></i> 关联商品
                                            </button>
                                        </div>
                                        <div class="col-sm-3 zm_3_sctupian" style="top:0;right:45px;">
                                            <input type="hidden" name="goods_img" id="goods_img" value="">
                                            <!--https://b.izhangmai.com/common/uploadpic?type=goods&amp;thumb=1','goods_img-->
                                            <input type="file" name="image" class="uploadImg">

                                                <img width="86" height="86" class="img vertical-top relative"
                                                     src="https://b.izhangmai.com/img/morenshangc.jpg">

                                        </div>
                                    </div>
                                    <div class="form-group relategoods-form-children" style="margin-bottom:0;">
                                    </div>
                                    <div class="relategoods-form-new" style="display: none;">
                                        <div class="form-group rule-chosen-drop relativeps"
                                             style="padding-left: 20px;margin-top:10px;margin-bottom:1px">
                                            <div class="relategoodsinc1"></div>
                                            <label class="col-sm-2 control-label" style="padding-right: 0px;margin-left: 40px;">子商品条码：</label>
                                            <div class="col-sm-3" style="padding-left: 5px;width:156px">
                                                <input type="text" id="relategoods-inputs-barcode" class="form-control" value=""
                                                       maxlength="24">
                                            </div>
                                            <label class="col-sm-2 control-label"
                                                   style="width: 45px;padding-left: 0;padding-right: 0">数量：</label>
                                            <div class="col-sm-2" style="padding-left:5px;width: 62px;">
                                                <input type="text" id="relategoods-inputs-number" class="form-control"
                                                       style="padding:6px;" value="" maxlength="8">
                                            </div>
                                        </div>
                                        <div class="form-group rule-chosen-drop relativeps"
                                             style="padding-left: 20px;padding-top:10px;">
                                            <label class="col-sm-2 control-label"
                                                   style="padding-right: 0px;margin-left: 12px;"></label>
                                            <div class="col-sm-6 text-danger relategdalert" id="ralategoods-empty-alert"
                                                 style="padding-left: 10px; display: none;">
                                                <span>暂无此条码商品，无法关联</span>
                                                <p>
                                                    <button class="btn btn-primary" id="btn-cannal-relategd" type="button"
                                                            style="padding-left: 20px;padding-right: 20px;margin-top:10px;">取消
                                                    </button>
                                                </p>
                                            </div>
                                            <div class="col-sm-6 relategdalert" id="ralategoods-alert"
                                                 style="padding-left: 10px; display: none;">
                                                <span></span>
                                                <p>
                                                    <button class="btn btn-primary" id="btn-save-relategd" data-bar_code=""
                                                            data-goods_name="" data-goods_type_id="" data-goods_son_id=""
                                                            data-cost_price="" data-true_price="" data-goods_point="" type="button"
                                                            style="padding-left: 20px;padding-right: 20px;margin-top:10px;">确定
                                                    </button>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group" style="margin-top: 10px">
                                        <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0"><span
                                                class="required">*</span>商品名称：</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control ac_input" id="goods_name" datatype="*"
                                                   maxlength="30" name="goods_name" value="" autocomplete="off">
                                        </div>
                                    </div>
                                    <style type="text/css">
                                        .rule-chosen-drop .chosen-drop {
                                            height: 356px;
                                            overflow-y: scroll;
                                        }
                                    </style>
                                    <div class="form-group" style="margin-top: 10px">
                                        <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0">规格：</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="goods_rule" maxlength="30" name="goods_rule"
                                                   value="">
                                        </div>
                                    </div>
                                    <div class="form-group ">

                                        <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0">单位：</label>
                                        <div class="col-sm-3">
                                            <div class="bill-head-box select-box inline-table">
                                                <div class="bill-input ">
                                                    <input type="text" value="单据日期">
                                                    <i class="icon-sort-down"></i>
                                                </div>
                                                <div class="select-down">
                                                    <div class="select-list">单据日期</div>
                                                    <div class="select-list">记账日期</div>
                                                </div>
                                            </div>
                                        </div>
                                        <button type="button" class="btn btn-link btn-unit open-modals" data-open="editUnit" data-head="编辑单位"
                                                ><i class="icon-edit"></i> 编辑单位</button>
                                    </div>
                                    <div class="form-group category-div">
                                        <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0">分类：</label>
                                        <div class="col-sm-3">
                                            <div class=" select-box " style="width: 100%">
                                                <div class="bill-input ">
                                                    <input type="text" value="单据日期">
                                                    <i class="icon-sort-down"></i>
                                                </div>
                                                <div class="select-down">
                                                    <div class="select-list">单据日期</div>
                                                    <div class="select-list">记账日期</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class=" select-box ">
                                                <div class="bill-input ">
                                                    <input type="text" value="单据日期">
                                                    <i class="icon-sort-down"></i>
                                                </div>
                                                <div class="select-down">
                                                    <div class="select-list">单据日期</div>
                                                    <div class="select-list">记账日期</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div style="margin-left: 165px">
                                            <span class="help-block m-b-none"></span>
                                        </div>
                                    </div>
                                    <!--修改价格权限验证-->
                                    <h4 class="zm-h3">价格</h4>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0"><span
                                                class="required">*</span>进价：</label>
                                        <div class="col-sm-3">
                                            <div class="input-group">
                                                <input type="text" class="form-control" datatype="money" maxlength="9"
                                                       id="cost_price" name="cost_price" value="">
                                                <span class="input-group-addon">元</span>
                                            </div>
                                        </div>
                                        <label class="col-sm-2 control-label"
                                               style="width:50px;padding-left: 0;padding-right: 0;"><span class="required">*</span>售价：</label>
                                        <div class="col-sm-3" style="padding-left: 5px">
                                            <div class="input-group">
                                                <input type="text" class="form-control" datatype="money" maxlength="9"
                                                       id="true_price" name="true_price" value="">
                                                <span class="input-group-addon">元</span>
                                            </div>
                                        </div>
                                        <span class="price-value" style="color:red;line-height: 34px">毛利率：0%</span>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0">会员价：</label>
                                        <div class="col-sm-3">
                                            <div class="input-group">
                                                <input type="text" class="form-control" datatype="money" maxlength="9"
                                                       ignore="ignore" name="vip_price" value="">
                                                <span class="input-group-addon">元</span>
                                            </div>
                                        </div>
                                    </div>
                                    <!--修改库存权限验证-->
                                    <h4 class="zm-h3" style="">库存</h4>
                                    <div class="form-group" style="">
                                        <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0">现有库存：</label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control" name="inventory" maxlength="10"
                                                   datatype="n|decmall" ignore="ignore" placeholder="0" value="">
                                        </div>
                                        <label class="col-sm-2 control-label" style="width: 90px;padding-left: 0;padding-right: 0;">商品保质期：</label>
                                        <div class="col-sm-3">
                                            <div class="input-group">
                                                <input type="text" class="form-control" datatype="n" maxlength="4" ignore="ignore"
                                                       name="life_day" value="">
                                                <span class="input-group-addon">天</span>
                                            </div>
                                        </div>
                                    </div>
                                    <!--活动设置权限验证-->
                                    <div style="">
                                        <h4 class="zm-h3">活动</h4>
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0">每消费</label>
                                            <div class="col-sm-3" style="width:155px;padding-right: 0">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" datatype="n|money" maxlength="7"
                                                           ignore="ignore" name="score" value="1">
                                        <span class="input-group-addon" style="padding-left: 5px">元 积<span
                                                style="color:red;"> 1 </span>分</span>
                                                </div>
                                            </div>
                                            <div class="col-sm-2 " style="width: 120px;padding-right: 0">

                        <span class="limit-score">
                            <label style="line-height: 31px"><input type="checkbox" name="limit_score" value="1"
                                                                    data-score="1"> 不设置积分</label>
                        </span>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-3 control-label"
                                                   style="width: 120px;padding-right: 0">活动选项：</label>

                                            <div class="col-sm-3" style="width:155px;padding-right: 0">
                                                <div class=" select-box ">
                                                    <div class="bill-input ">
                                                        <input type="text" value="不参加活动">
                                                        <i class="icon-sort-down"></i>
                                                    </div>
                                                    <div class="select-down">
                                                        <div class="select-list">不参加活动</div>
                                                        <div class="select-list">特价</div>
                                                        <div class="select-list">惠赠</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-2 limit-time" id="limit-time" style="display: none">
                                                <label style="line-height: 31px"><input type="checkbox" name="limit" value="1">
                                                    限时</label>
                                            </div>
                                        </div>
                                        <div class="form-group discount-date " style="display: none" id="discount-date">
                                            <!--用于自动化测试--start-->
                                            <input type="hidden" name="discount_start_date_test" value="">
                                            <input type="hidden" name="discount_end_date_test" value="">
                                            <!--用于自动化测试--end-->
                                            <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0"><span
                                                    class="required">*</span>开始时间：</label>
                                            <div class="col-sm-3" style="width:155px;padding-right: 0">
                                                <input type="text" class="form-control discount-date-input"
                                                       name="discount_start_date" datatype="*" ignore="ignore" value="">
                                            </div>
                                            <label class="col-sm-2 control-label"
                                                   style="width:80px;padding-left: 0;padding-right: 0"><span
                                                    class="required">*</span>结束时间：</label>
                                            <div class="col-sm-3" style="width:155px;padding-left: 0">
                                                <input type="text" class="form-control discount-date-input" name="discount_end_date"
                                                       datatype="*" ignore="ignore" value="">
                                            </div>
                                        </div>
                                        <div class="form-group discount_type_1">
                                            <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0"><span
                                                    class="required">*</span>活动特价：</label>
                                            <div class="col-sm-3" style="width:155px;padding-right: 0">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" name="discount_price"
                                                           id="discount_price" datatype="n|decmall" ignore="ignore" value="">
                                                    <span class="input-group-addon">元</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="discount_give" style="display: none">
                                            <div class="form-group discount_type_2 ">
                                                <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0"><span
                                                        class="required">*</span>购买数量：</label>
                                                <div class="col-sm-3" style="width:155px;padding-right: 0">
                                                    <input type="text" class="form-control" name="buy_num" id="buy_num"
                                                           datatype="give_num" maxlength="4" ignore="ignore" value="">
                                                </div>
                                                <div class="col-sm-3 ">
                                                    <button class="btn btn-link  btn-other" type="button">
                                                        添加赠品
                                                    </button>

                                                </div>


                                            </div>
                                            <div class="form-group give-num-div " style="">
                                                <label class="col-sm-3 control-label " style="width: 120px;padding-right: 0"><span
                                                        class="required">*</span>赠送数量：</label>
                                                <div class="col-sm-3 " style="width:155px;padding-right: 0">
                                                    <input type="text" class="form-control" name="give_num" id="give_num" value=""
                                                           datatype="give_num" maxlength="4" ignore="ignore">
                                                </div>

                                            </div>
                                            <div class="form-group discount-form-children" style="margin-bottom:0;display:none">
                                                <label class="col-sm-3 control-label"
                                                       style="width: 120px;padding-right: 0">已添加赠品：</label>
                                                <div class="col-sm-8 " style="padding-left: 0">
                                                </div>
                                            </div>

                                            <div class="form-group goods-other " style="margin-bottom:0;display: none">
                                                <label class="col-sm-3 control-label" style="width: 120px;padding-right: 0"><span
                                                        class="required">*</span>赠品条码：</label>
                                                <div class="col-sm-3" style="width:155px;padding-right: 0">
                                                    <input type="text" class="form-control" id="discount-inputs-barcode"
                                                           datatype="*" maxlength="24" value="" ignore="ignore">
                                                </div>
                                                <label class="col-sm-2 control-label"
                                                       style="width:80px;padding-left: 0;padding-right: 0"><span
                                                        class="required">*</span>赠送数量：</label>
                                                <div class="col-sm-2" style="padding-left: 0">
                                                    <input type="text" class="form-control" id="discount-inputs-number" datatype="n"
                                                           maxlength="4" value="" ignore="ignore">
                                                </div>
                                                <div class="col-sm-1" style="padding-left: 0;">
                                                    <button class="btn btn-link  btn-cancel-other red" type="button">取消</button>
                                                </div>
                                            </div>
                                            <div class="form-group rule-chosen-drop relativeps"
                                                 style="padding-left: 20px;padding-top:5px;">
                                                <label class="col-sm-2 control-label"
                                                       style="padding-right: 0px;margin-left: 12px;"></label>
                                                <div class="col-sm-6 text-danger relategdalert" id="discount-empty-alert"
                                                     style="padding-left: 10px; display: none;">
                                                    <span>暂无此条码商品，无法添加</span>
                                                    <!--<p><button class="btn btn-primary" id="btn-cannal-discount" type="button" style="padding-left: 20px;padding-right: 20px;margin-top:10px;">取消</button></p>-->
                                                </div>
                                                <div class="col-sm-6 relategdalert" id="discount-alert"
                                                     style="padding-left: 10px;display: none;">
                                                    <span></span>
                                                    <p>
                                                        <button class="btn btn-primary" id="btn-save-discount" data-bar_code=""
                                                                data-goods_name="" data-goods_type_id="" data-goods_son_id=""
                                                                data-cost_price="" data-true_price="" data-goods_point=""
                                                                type="button"
                                                                style="padding-left: 20px;padding-right: 20px;margin-top:10px;">确定
                                                        </button>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!--总部修改商品同步到其他分店-->


                                </div>

                                <div class="modal-footer">
                                    <div class="checkbox checkbox-inline">
                                        <label for="continue_checkbox" style="padding-right: 25px;">
                                            <input type="checkbox" id="continue_checkbox" checked="checked"
                                                   style="margin:2px 0 0 -15px;">不关闭窗口继续添加
                                        </label>
                                    </div>
                                    <button class="btn btn-primary" type="button" id="form-submit">保存</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 单位编辑 -->
<div class="modals editUnit" >
    <div class="modals-dilog w-600" style="top: 50px">
        <div class="modals-content">
            <div class="modals-head">
                <span>编辑单位</span>
                <div class="close-m closeModals font-size-14 blue">&lt;&lt;返回</div>
            </div>
            <div class="modals-body maxheight">
                <div class="modals-body-content">
                    <div class="madals-container active">
                        <!-- Tab panes -->
                        <div class="tab-content " style="border-bottom: none;max-height: 580px;overflow-y: scroll">
                            <form action="" id="" >
                                <div class="form-group clearfix margin-t10">
                                    <label class="col-sm-3 control-label text-right">单位名称：</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" name="paytype" datatype="money" value=""
                                        >
                                    </div>
                                    <div  class="col-sm-3" >
                                        <a href="#" class="btn sure-bg">保存</a>
                                    </div>
                                </div>
                            </form>
                            <div class=" margin-t10 payList-table" style="margin-bottom: 20px">
                                <table id="unitList-table"></table>
                            </div>
                        </div>
                        <!--<div class="clearfix foots">-->
                        <!--<div class="rt">-->
                        <!--<a href="#" class="btn sure-bg">确定</a>-->
                        <!--</div>-->
                        <!--</div>-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 设置分类 -->
<div class="modals typeSeting" >
    <div class="modals-dilog w-600" style="top: 50px;min-height: 200px">
        <div class="modals-content">
            <div class="modals-head">
                <span>设置分类</span>
                <div class="close-m closeModals font-size-14 blue">&lt;&lt;返回</div>
            </div>
            <div class="modals-body maxheight">
                <div class="modals-body-content">
                    <div class="madals-container active">
                        <!-- Tab panes -->
                        <div class="tab-content " style="border-bottom: none;max-height: 580px;">
                            <form action="" id="" >
                                <div class="modals-title text-center">
                                    共选择了 <span class="red">1</span>个商品
                                </div>
                                <div class="form-group clearfix margin-t10">
                                    <label class="col-sm-4 control-label text-right">选择分类：</label>
                                    <div class="col-sm-8">
                                        <div class="select-box " >
                                            <div class="bill-input ">
                                                <input type="text" value="全部">
                                                <i class="icon-sort-down"></i>
                                            </div>
                                            <div class="select-down goods_type_id" style="display: none;">
                                                <div class="select-list">全部</div>
                                                <div class="select-list">休闲食品</div>
                                                <div class="select-list">饮料</div>
                                                <div class="select-list">烟酒</div>
                                                <div class="select-list">熟食速食</div>
                                                <div class="select-list">生活日用</div>
                                            </div>
                                        </div>
                                        <div class="select-box " >
                                            <div class="bill-input ">
                                                <input type="text" value="全部">
                                                <i class="icon-sort-down"></i>
                                            </div>
                                            <div class="select-down goods_son_id" style="display: none;">
                                                <div class="select-list">全部</div>

                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-primary" type="button" >保存</button>
                                </div>
                            </form>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 设置积分 -->
<div class="modals integralSeting" >
    <div class="modals-dilog w-600" style="top: 50px;min-height: 200px">
        <div class="modals-content">
            <div class="modals-head">
                <span>设置分类</span>
                <div class="close-m closeModals font-size-14 blue">&lt;&lt;返回</div>
            </div>
            <div class="modals-body maxheight">
                <div class="modals-body-content">
                    <div class="madals-container active">
                        <!-- Tab panes -->
                        <div class="tab-content " style="border-bottom: none;max-height: 580px;">
                            <form action="" id="" >
                                <div class="modals-title text-center">
                                    共选择了 <span class="red">1</span>个商品
                                </div>
                                <div class="form-group clearfix">
                                    <label class="col-sm-3 control-label text-right" style="width: 120px;padding-right: 0">每消费</label>
                                    <div class="col-sm-3" style="width:155px;padding-right: 0">
                                        <div class="input-group">
                                            <input type="text" class="form-control" datatype="n|money" maxlength="7" ignore="ignore" name="score" value="1">
                                            <span class="input-group-addon" style="padding-left: 5px">元 积<span style="color:red;"> 1 </span>分</span>
                                        </div>
                                    </div>
                                    <div class="col-sm-2 " style="width: 120px;padding-right: 0">

                        <span class="limit-score">
                            <label style="line-height: 31px"><input type="checkbox" name="limit_score" value="1" data-score="1"> 不设置积分</label>
                        </span>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-primary" type="button" >保存</button>
                                </div>
                            </form>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--[if !IE]> -->

<script type="text/javascript">
    window.jQuery || document.write("<script src='../assets/js/jquery-2.0.3.min.js'>" + "<" + "/script>");
</script>

<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script src='../assets/js/jquery-1.10.2.min.js'>" + "<" + "/script>");
</script>
<![endif]-->

<script type="text/javascript">
    if ("ontouchend" in document) document.write("<script src='../assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
</script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/typeahead-bs2.min.js"></script>

<!-- page specific plugin scripts -->

<!--[if lte IE 8]>
<script src="../assets/js/excanvas.min.js"></script>
<![endif]-->

<script src="../assets/js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="../assets/js/jquery.ui.touch-punch.min.js"></script>
<script src="../assets/js/jquery.slimscroll.min.js"></script>

<script src="../assets/js/jquery.sparkline.min.js"></script>

<!--<script src="../assets/js/jqGrid/jquery.jqGrid.min.js"></script>-->

<!--<script src="../assets/js/jqGrid/i18n/grid.locale-cn.js"></script>-->
<script src="../assets/js/jqGrid/jquery.jqGrid.min.js"></script>
<script src="../assets/js/jqGrid/i18n/grid.locale-cn.js"></script>
<!--<script src="../js/jqGrid.js"></script>-->
<!--<script src="../assets/js/jqGrid/jquery.jqGrid.src.js"></script>-->
<script src="../assets/js/date-time/bootstrap-datepicker.min.js"></script>
<script src="../assets/js/date-time/bootstrap-timepicker.min.js"></script>
<script src="../js/plugins/sweetalert/sweetalert.min.js"></script>
<!-- ace scripts -->
<script src="../assets/js/jquery.validate.min.js"></script>
<script src="../assets/js/jquery.gritter.min.js"></script>
<script src="../assets/js/ace-elements.min.js"></script>
<script src="../assets/js/ace.min.js"></script>

<script src="../js/main.js"></script>

<!--<script src="../js/echarts.min.js"></script>-->
<!-- inline scripts related to this page -->

<script type="text/javascript">

    var shopmanageCol= [
        {
            label : '条码',
            name: 'barcode',
            align:'center',
            width: 140,
        },
        {
            label: '商品名称',
            name: 'shopName',
            width: 220,
            align:'center',
            sortable:true,
            sorttype:"number"
        },
        {
            label: '规格',
            name: 'standard',
            align:'center',
            width: 100,
        },
        {
            label: '单位',
            name: 'unit',
            align:'center',
            width: 100,
        },
        {
            label: '分类',
            name: 'type',
            align:'center',
            width: 100,
        },
        {
            label: '类型',
            name: 'modal',
            align:'center',
            width: 100,
        },
        {
            label: '进价',
            name: 'purchasePrice',
            align:'center',
            width: 100,
        },
        {
            label: '售价',
            name: 'salePrice',
            align:'center',
            width: 100,
        },
        {
            label: '毛利率',
            name: 'grossProfitRate',
            align:'center',
            width: 100,
        },
        {
            label: '库存',
            name: 'storeNum',
            align:'center',
            width: 100,
        },
        {
            label: '月销量',
            name: 'monthSale',
            align:'center',
            width: 100,
        },
        {
            label: '商品状态',
            name: 'shopStatus',
            align:'center',
            width: 100,
            formatter: function (cellvalue, options, rowObject) {
                var str=''
                console.log(cellvalue)
                if(cellvalue==0){
                    str+='<span>正常</span>'
                }else if(cellvalue==1){
                    str+='<span class="red">特价</span>'
                }else if(cellvalue==2){
                    str+= '<span class="red-5">惠赠</span>'
                }
                return str;
            }
        },
        {
            label: '销售状态',
            name: 'saleStatus',
            align:'center',
            width: 100,
            formatter: function (cellvalue, options, rowObject) {
                if(cellvalue==0){
                    return '<span>在售</span>'
                }else if(cellvalue==1){
                    return '<span >下架</span>'
                }
            }
        },
        {
            label: '操作',
            name: 'operation',
            align:'center',
            width: 160,
            formatter: function (cellvalue, options, rowObject) {
                var gid = "'#"+options.gid +"'";
                var str='<div><span class="table-bar" onclick="manage_edit('+ rowObject.id + ','+ gid + ')"><i class="icon-edit"></i>编辑</span>';
                if(cellvalue==0){
                   str+='<div class="dropdown trianglemenux" style="padding: 3px 0">\
                           <div class="trianglemenux-t" style="padding: 0 10px;"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">操作 <span class="caret"></span></div>\
                            <ul class="dropdown-menu trianglemenux-c"  style="min-width: 84px;top:22px;left: -22px">\
                            <li>\
                            <a href="javascript:;" onclick="shop_breakage('+ rowObject.id + ','+ gid + ')" class="text-danger btn-exchange" style="color: #ff6e6e"><i class="icon-edit"></i> 报损</a>\
                            </li>\
                            <li class="divider" role="separator" style="margin: 5px 0"></li>\
                            <li>\
                            <a href="javascript:;" onclick="shop_downaway('+ rowObject.id + ','+ gid + ')" class="text-danger btn-ajax" style="color: #ff6e6e"><i class="icon-download"></i> 下架</a>\
                            </li>\
                            </ul>\
                            </div>';
                }else if(cellvalue==1){
                   str+='<div class="dropdown trianglemenux " style="padding: 3px 0">\
                           <div class="trianglemenux-t" style="padding: 0 10px;"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">操作 <span class="caret"></span></div>\
                            <ul class="dropdown-menu trianglemenux-c"  style="min-width: 84px;top:22px;left: -22px">\
                            <li>\
                            <a href="javascript:;" onclick="shop_breakage('+ rowObject.id + ','+ gid + ')" class="text-danger btn-exchange" style="color: #ff6e6e" ><i class="icon-edit"></i> 报损</a>\
                            </li>\
                            <li class="divider" role="separator" style="margin: 5px 0"></li>\
                            <li>\
                            <a href="javascript:;" onclick="shop_putaway('+ rowObject.id + ','+ gid + ')" class="text-danger btn-ajax" style="color: #ff6e6e"><i class="icon-upload"></i> 上架</a>\
                            </li>\
                            <li class="divider" role="separator" style="margin: 5px 0"></li>\
                            <li>\
                            <a href="javascript:;" onclick="shop_delete('+ rowObject.id + ','+ gid + ')" class="text-danger btn-ajax" style="color: #ff6e6e" data-msg="确定要删除该商品吗？"><i class="icon-trash"></i> 删除</a>\
                            </li>\
                            </ul>\
                            </div>'
                }
                str+='</div>'
                return str;
            }
        }
    ];
    jqgridTable({
        "tableId":"#shopmanage-table",
        "pagerId":"",
        "url":"../data/shop/shopmanageList.json",
        "colModel":shopmanageCol,
        "footerrow":false,
        "height":300,
        "cellEdit":false,
        "footerrowFun":'',
        "multiselect":true

    });
    //单位列表unitList
    var unitListCol= [
        {
            label : '单位名称',
            name: 'unitName',
            align:'center',
            width: 240,
        },

        {
            label: '操作',
            name: 'operation',
            align:'center',
            width: 240,
            formatter: function (cellvalue, options, rowObject) {
                var gid = "'#"+options.gid +"'";
                var str='<span class="table-bar " onclick="delete_unit('+ rowObject.id + ','+ gid + ')">删除</span>'
                return str;
            }
        }
    ];
    jqgridTable({
        "tableId":"#unitList-table",
        "pagerId":"",
        "url":"../data/unitList.json",
        "colModel":unitListCol,
        "footerrow":false,
        "height":"100%",
        "cellEdit":false,
        "footerrowFun":'',
        "multiselect":false

    });

    var sousuokey = true;
    var $modal_body = $('.modal-body');
    $(document).on("change",".modal-body .quanxiantr1 .checkbox-input",function(){
        sousuokey = true;
    });
    $(document).on("change",".modal-body .quanxiantr1 .checkbox-input",function(){
        if($(this).is(':checked')){
            var checkboxarr = $(this).parents(".quanxiantr1").next().find(".checkbox-input");
            checkboxarr.each(function(){
                $(this).prop("checked",true);
            });
            $(this).parents(".quanxiantr1").next().show();
        }else if(!$(this).is(':checked') && sousuokey){
            var checkboxarr = $(this).parents(".quanxiantr1").next()[0]
            var checkboxarrd = $(checkboxarr).find(".checkbox-input");
            checkboxarrd.each(function(){
                $(this).prop("checked",false);
            });
        }
    });

    $(document).on("change",".modal-body .quanxiantr2 .checkbox-input",function(){
        if(!$(this).prop("checked")){
            sousuokey = false;
            $(this).parents(".quanxiantr2").prev().find(".checkbox-input").prop("checked",false);
        }else{
            var boxarr = $(this).parents(".quanxiantr2").find(".checkbox-input");
            var boxarrlength = $(this).parents(".quanxiantr2").find(".checkbox-input").length;
            var xiuqukey  = 0;
            boxarr.each(function(){
                if( $(this).prop("checked")){
                    xiuqukey += 1
                }
            });
            if(xiuqukey == boxarrlength){
                $(this).parents(".quanxiantr2").prev().find(".checkbox-input").prop("checked",true);
            }
        }
    });
    $(document).on("click",'.modal-body .quanxiantr1 button',function(){
        $(this).children("i").toggleClass('icon-sort-up');
        $(this).parents(".quanxiantr1").next().toggle();
    });
    //编辑商品
    function manage_edit(rowId,gid){
        $('.addShop').show();
    }
    //删除商品
    function shop_delete(rowId,gid){
        swal({
            title: "确定要进行该操作吗？",
            text: false,
            type: "warning",
            showCancelButton: true,
            closeOnConfirm: true,
            confirmButtonText: false,
            confirmButtonColor: "#ec6c62"
        }, function () {
            swal({
                title: "删除成功",
                text: false,
                type: "success",
                showCancelButton: false,
                showConfirmButton: false,
                timer: 2000
            })
            $.appServer.updateStaffStateById({
                        loginToken: "B1EBE47605952CF875EB795F811CE3E4",
                        staffId: staffId,
                        companys: companys,
                    },
                    function (data) {
                        if (data.output.flag == true) {
                            var pageIndex=localStorage.getItem('StaffpageIndex');
                            var staffHome = {
                                loginToken: "B1EBE47605952CF875EB795F811CE3E4",
                                companyId: 12,
                                pageIndex: pageIndex,
                                pageSize: pageSize
                            }
                            staffChangeFun(staffHome);
                        }
                    })

        })

    }
    //商品上架
    function shop_putaway(rowId,gid){
        swal({
            title: "确定要上架该商品吗？",
            text: false,
            type: "warning",
            showCancelButton: true,
            closeOnConfirm: true,
            confirmButtonText: false,
            confirmButtonColor: "#ec6c62"
        }, function () {
            swal({
                title: "上架成功",
                text: false,
                type: "success",
                showCancelButton: false,
                showConfirmButton: false,
                timer: 2000
            })
            $.appServer.updateStaffStateById({
                        loginToken: "B1EBE47605952CF875EB795F811CE3E4",
                        staffId: staffId,
                        companys: companys,
                    },
                    function (data) {

                        if (data.output.flag == true) {
                            var pageIndex=localStorage.getItem('StaffpageIndex');
                            var staffHome = {
                                loginToken: "B1EBE47605952CF875EB795F811CE3E4",
                                companyId: 12,
                                pageIndex: pageIndex,
                                pageSize: pageSize
                            }
                            staffChangeFun(staffHome);
                        }
                    })

        })
    }
    //商品下架
    function shop_downaway(rowId,gid){
        swal({
            title: "确定要下架该商品吗？",
            text: false,
            type: "warning",
            showCancelButton: true,
            closeOnConfirm: true,
            confirmButtonText: false,
            confirmButtonColor: "#ec6c62"
        }, function () {
            swal({
                title: "下架成功",
                text: false,
                type: "success",
                showCancelButton: false,
                showConfirmButton: false,
                timer: 2000
            })
            $.appServer.updateStaffStateById({
                        loginToken: "B1EBE47605952CF875EB795F811CE3E4",
                        staffId: staffId,
                        companys: companys,
                    },
                    function (data) {

                        if (data.output.flag == true) {
                            var pageIndex=localStorage.getItem('StaffpageIndex');
                            var staffHome = {
                                loginToken: "B1EBE47605952CF875EB795F811CE3E4",
                                companyId: 12,
                                pageIndex: pageIndex,
                                pageSize: pageSize
                            }
                            staffChangeFun(staffHome);
                        }
                    })

        })
    }
    //商品报损
    function shop_breakage(rowId,gid){
        swal({
            title: "确定要执行该操作吗？",
            text: false,
            type: "warning",
            showCancelButton: true,
            closeOnConfirm: true,
            confirmButtonText: false,
            confirmButtonColor: "#ec6c62"
        }, function () {
            swal({
                title: "操作成功",
                text: false,
                type: "success",
                showCancelButton: false,
                showConfirmButton: false,
                timer: 2000
            })
            $.appServer.updateStaffStateById({
                        loginToken: "B1EBE47605952CF875EB795F811CE3E4",
                        staffId: staffId,
                        companys: companys,
                    },
                    function (data) {

                        if (data.output.flag == true) {
                            var pageIndex=localStorage.getItem('StaffpageIndex');
                            var staffHome = {
                                loginToken: "B1EBE47605952CF875EB795F811CE3E4",
                                companyId: 12,
                                pageIndex: pageIndex,
                                pageSize: pageSize
                            }
                            staffChangeFun(staffHome);
                        }
                    })

        })
    }
    //设置分类
    function setType(){
        var changeId=jQuery('#shopmanage-table').jqGrid('getGridParam','selarrrow');
        if(changeId.length==0){
            swal({
                title: "请先勾选商品",
                text: false,
                type: "warning",
                showCancelButton: false,
                showConfirmButton: true,
            })
            return
        }else {
            $('.typeSeting').show().find('.modals-title span').html(changeId.length);
        }

    }
    //设置积分
    function setIntegral(){
        var changeId=jQuery('#shopmanage-table').jqGrid('getGridParam','selarrrow');
        if(changeId.length==0){
            swal({
                title: "请先勾选商品",
                text: false,
                type: "warning",
                showCancelButton: false,
                showConfirmButton: true,
            })
            return
        }else {
            $('.integralSeting').show().find('.modals-title span').html(changeId.length);
        }

    }

</script>
</body>
</html>
